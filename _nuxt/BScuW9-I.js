const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VNnCm1QZ.js","./D27dys8o.js"])))=>i.map(i=>d[i]);
import{P as W,an as w,r as E,ao as x,ap as M,D as V,aq as F,f as q,w as Q,ad as T,ac as H,ar as k,N as z,a8 as K,as as G,b as Y}from"./D27dys8o.js";const J=a=>a==="defer"||a===!1;function ge(...a){var C;const s=typeof a[a.length-1]=="string"?a.pop():void 0;typeof a[0]!="string"&&a.unshift(s);let[t,r,n={}]=a;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const e=W(),o=r,f=()=>w.value,h=()=>e.isHydrating?e.payload.data[t]:e.static.data[t];n.server=n.server??!0,n.default=n.default??f,n.getCachedData=n.getCachedData??h,n.lazy=n.lazy??!1,n.immediate=n.immediate??!0,n.deep=n.deep??w.deep,n.dedupe=n.dedupe??"cancel";const p=n.getCachedData(t,e),c=p!=null;if(!e._asyncData[t]||!n.immediate){(C=e.payload._errors)[t]??(C[t]=w.errorValue);const l=n.deep?E:x;e._asyncData[t]={data:l(c?p:n.default()),pending:E(!c),error:M(e.payload._errors,t),status:E("idle"),_default:n.default}}const i={...e._asyncData[t]};delete i._default,i.refresh=i.execute=(l={})=>{if(e._asyncDataPromises[t]){if(J(l.dedupe??n.dedupe))return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}if(l._initial||e.isHydrating&&l._initial!==!1){const g=l._initial?p:n.getCachedData(t,e);if(g!=null)return Promise.resolve(g)}i.pending.value=!0,i.status.value="pending";const y=new Promise((g,d)=>{try{g(o(e))}catch(u){d(u)}}).then(async g=>{if(y.cancelled)return e._asyncDataPromises[t];let d=g;n.transform&&(d=await n.transform(g)),n.pick&&(d=Z(d,n.pick)),e.payload.data[t]=d,i.data.value=d,i.error.value=w.errorValue,i.status.value="success"}).catch(g=>{if(y.cancelled)return e._asyncDataPromises[t];i.error.value=k(g),i.data.value=z(n.default()),i.status.value="error"}).finally(()=>{y.cancelled||(i.pending.value=!1,delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=y,e._asyncDataPromises[t]},i.clear=()=>X(e,t);const m=()=>i.refresh({_initial:!0}),_=n.server!==!1&&e.payload.serverRendered;{const l=V();if(l&&_&&n.immediate&&!l.sp&&(l.sp=[]),l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const d=l._nuxtOnBeforeMountCbs;F(()=>{d.forEach(u=>{u()}),d.splice(0,d.length)}),q(()=>d.splice(0,d.length))}_&&e.isHydrating&&(i.error.value||p!=null)?(i.pending.value=!1,i.status.value=i.error.value?"error":"success"):l&&(e.payload.serverRendered&&e.isHydrating||n.lazy)&&n.immediate?l._nuxtOnBeforeMountCbs.push(m):n.immediate&&m();const y=H();if(n.watch){const d=Q(n.watch,()=>i.refresh());y&&T(d)}const g=e.hook("app:data:refresh",async d=>{(!d||d.includes(t))&&await i.refresh()});y&&T(g)}const b=Promise.resolve(e._asyncDataPromises[t]).then(()=>i);return Object.assign(b,i),b}function X(a,s){s in a.payload.data&&(a.payload.data[s]=void 0),s in a.payload._errors&&(a.payload._errors[s]=w.errorValue),a._asyncData[s]&&(a._asyncData[s].data.value=void 0,a._asyncData[s].error.value=w.errorValue,a._asyncData[s].pending.value=!1,a._asyncData[s].status.value="idle"),s in a._asyncDataPromises&&(a._asyncDataPromises[s]&&(a._asyncDataPromises[s].cancelled=!0),a._asyncDataPromises[s]=void 0)}function Z(a,s){const t={};for(const r of s)t[r]=a[r];return t}const ee=/\d/,te=["-","_","/","."];function ne(a=""){if(!ee.test(a))return a!==a.toLowerCase()}function B(a,s){const t=te,r=[];if(!a||typeof a!="string")return r;let n="",e,o;for(const f of a){const h=t.includes(f);if(h===!0){r.push(n),n="",e=void 0;continue}const p=ne(f);if(o===!1){if(e===!1&&p===!0){r.push(n),n=f,e=p;continue}if(e===!0&&p===!1&&n.length>1){const c=n.at(-1);r.push(n.slice(0,Math.max(0,n.length-1))),n=c+f,e=p;continue}}n+=f,e=p,o=h}return r.push(n),r}function ae(a){return a?a[0].toUpperCase()+a.slice(1):""}function re(a,s){return a?(Array.isArray(a)?a:B(a)).map(t=>ae(s!=null&&s.normalize?t.toLowerCase():t)).join(""):""}function ye(a,s){return a?(Array.isArray(a)?a:B(a)).map(t=>t.toLowerCase()).join("-"):""}const me={wax:"v3.3.0--wnCUMWW0VmPm1_CVnBmQVVJAvelbwAQgxDhOI3AmW8A"},se={wax:"_content_wax",info:"_content_info"},_e={wax:{type:"page",fields:{id:"string",stem:"string",extension:"string",meta:"json",path:"string",title:"string",description:"string",seo:"json",body:"json",navigation:"json",tags:"json",address:"string",image:"string",date:"date",wax:"string",foo:"string",location:"json",links:"json",display:"string",tour:"number"}},info:{type:"data",fields:{}}},N=(a,s)=>{const t=a._conditions;return t.length>0?`(${t.join(` ${s} `)})`:""},O=a=>{const s=[],t={_conditions:s,where(r,n,e){let o;switch(n.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(e)){const f=e.map(h=>S(h)).join(", ");o=`"${String(r)}" ${n.toUpperCase()} (${f})`}else throw new TypeError(`Value for ${n} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(e)&&e.length===2)o=`"${String(r)}" ${n.toUpperCase()} ${S(e[0])} AND ${S(e[1])}`;else throw new Error(`Value for ${n} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":o=`"${String(r)}" ${n.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":o=`"${String(r)}" ${n.toUpperCase()} ${S(e)}`;break;default:o=`"${String(r)}" ${n} ${S(typeof e=="boolean"?Number(e):e)}`}return s.push(`${o}`),t},andWhere(r){const n=r(O());return s.push(N(n,"AND")),t},orWhere(r){const n=r(O());return s.push(N(n,"OR")),t}};return t},ie=(a,s)=>{const t={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},r={__params:t,andWhere(e){const o=e(O());return t.conditions.push(N(o,"AND")),r},orWhere(e){const o=e(O());return t.conditions.push(N(o,"OR")),r},path(e){return r.where("path","=",K(e))},skip(e){return t.offset=e,r},where(e,o,f){return r.andWhere(h=>h.where(String(e),o,f)),r},limit(e){return t.limit=e,r},select(...e){return e.length&&t.selectedFields.push(...e),r},order(e,o){return t.orderBy.push(`"${String(e)}" ${o}`),r},async all(){return s(a,n()).then(e=>e||[])},async first(){return s(a,n({limit:1})).then(e=>e[0]||null)},async count(e="*",o=!1){return s(a,n({count:{field:String(e),distinct:o}})).then(f=>f[0].count)}};function n(e={}){let o="SELECT ";if(e!=null&&e.count)o+=`COUNT(${e.count.distinct?"DISTINCT ":""}${e.count.field}) as count`;else{const h=Array.from(new Set(t.selectedFields));o+=h.length>0?h.map(p=>`"${String(p)}"`).join(", "):"*"}o+=` FROM ${se[String(a)]}`,t.conditions.length>0&&(o+=` WHERE ${t.conditions.join(" AND ")}`),t.orderBy.length>0?o+=` ORDER BY ${t.orderBy.join(", ")}`:o+=" ORDER BY stem ASC";const f=(e==null?void 0:e.limit)||t.limit;return f>0&&(t.offset>0?o+=` LIMIT ${f} OFFSET ${t.offset}`:o+=` LIMIT ${f}`),o}return r};function S(a){return`'${String(a).replace(/'/g,"''")}'`}function R(a){return s=>(s=s||{},(a||[]).filter(t=>typeof s[t]<"u").reduce((t,r)=>Object.assign(t,{[r]:s[r]}),{}))}async function oe(a,s=[]){var p;const t=a.__params;(p=t==null?void 0:t.orderBy)!=null&&p.length||(a=a.order("stem","ASC"));const r=await a.orWhere(c=>c.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...s||[]).all(),{contents:n,configs:e}=r.reduce((c,i)=>{var m;if(String(i.stem).split("/").pop()===".navigation"){i.title=((m=i.title)==null?void 0:m.toLowerCase())==="navigation"?"":i.title;const _=i.path.split("/").slice(0,-1).join("/")||"/";c.configs[_]={...i,...i.body}}else c.contents.push(i);return c},{configs:{},contents:[]}),o=c=>({...R(["title",...s])(c),...c.meta,...A(c==null?void 0:c.navigation)?c.navigation:{}}),f=c=>({...R(["title",...s])(c),...A(c==null?void 0:c.navigation)?c.navigation:{}}),h=n.reduce((c,i)=>{var d;const m=i.path.substring(1).split("/"),_=i.stem.split("/"),b=!!((d=_[_.length-1])!=null&&d.match(/([1-9]\d*\.)?index/g)),C=u=>({title:u.title,path:u.path,stem:u.stem,children:[],...f(u)}),l=C(i);if(b){const u=e[l.path];if(typeof(u==null?void 0:u.navigation)<"u"&&(u==null?void 0:u.navigation)===!1)return c;if(i.path!=="/"){const D=C(i);l.children.push(D)}u&&Object.assign(l,o(u))}if(m.length===1){const u=c.find(D=>D.path===l.path&&D.page===!1);return b&&u?Object.assign(u,{page:void 0,children:[...l.children||[],...u.children||[]]}):c.push(l),c}const y=m.slice(0,-1).reduce((u,D,j)=>{const P="/"+m.slice(0,j+1).join("/"),v=e[P];if(typeof(v==null?void 0:v.navigation)<"u"&&v.navigation===!1)return[];let $=u.find(I=>I.path===P);if(!$){const I=v?o(v):{};$={...I,title:I.title||ce(D),path:P,stem:_.slice(0,j+1).join("/"),children:[],page:!1},u.push($)}return $.children},c),g=y.find(u=>u.path===l.path&&u.page===!1);return g?Object.assign(g,{...l,page:void 0,children:[...l.children||[],...g.children||[]]}):y.push(l),c},[]);return L(h)}function L(a){var t;const s=a;for(const r of s)(t=r.children)!=null&&t.length?L(r.children):delete r.children;return a}function A(a){return a!==null&&Object.prototype.toString.call(a)==="[object Object]"}const ce=a=>a.split(/[\s-]/g).map(re).join(" ");async function le(a,s,t){const{before:r=1,after:n=1,fields:e=[]}={},o=await oe(a,e),f=U(o),h=f.findIndex(i=>i.path===s),p=h===-1?[]:f.slice(h-r,h),c=h===-1?[]:f.slice(h+1,h+n+1);return[...Array.from({length:r}).fill(null).concat(p).slice(p.length),...c.concat(Array.from({length:n}).fill(null)).slice(0,n)]}function U(a){return a.flatMap(t=>{const r=t.children?U(t.children):[];return t.page===!1||r.length&&r.find(n=>n.path===t.path)?r:[{...t,children:void 0},...r]})}const ue=a=>{var t,r;const s=(r=(t=G())==null?void 0:t.ssrContext)==null?void 0:r.event;return ie(a,(n,e)=>fe(s,n,e))};function De(a,s,t){return he(a,r=>le(r,s))}async function fe(a,s,t){return de(s,t)}async function de(a,s){return await Y(()=>import("./VNnCm1QZ.js"),__vite__mapDeps([0,1]),import.meta.url).then(r=>r.loadDatabaseAdapter(a)).then(r=>r.all(s))}function he(a,s){const t=ue(a),r={where(n,e,o){return t.where(String(n),e,o),r},andWhere(n){return t.andWhere(n),r},orWhere(n){return t.orWhere(n),r},order(n,e){return t.order(String(n),e),r},then(n,e){return s(t).then(n,e)},catch(n){return this.then(void 0,n)},finally(n){return this.then(void 0,void 0).finally(n)},get[Symbol.toStringTag](){return"Promise"}};return r}export{_e as a,De as b,me as c,ye as k,re as p,ue as q,se as t,ge as u};
